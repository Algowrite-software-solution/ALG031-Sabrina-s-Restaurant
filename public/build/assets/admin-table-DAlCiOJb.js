import{j as e,r as u}from"./app-BxBXNE8X.js";import{C as g}from"./checkbox-Zk95tVQ_.js";import{S as v,a as C,c as N,e as x}from"./select-CuQGSzdU.js";import{R as h}from"./app-layout-DvKBM6Qh.js";import{c as y,d as b,a as D}from"./api-c0Kn-lJ5.js";import{D as A,e as w,a as E,b as R,c as k,f as I}from"./dialog-CTfyQ2oB.js";import{I as f}from"./input-CjPw_khV.js";import{L as j}from"./label-BhoZO0Dz.js";import{c as P}from"./createLucideIcon-aWMtLFaA.js";import{D as M}from"./default-table-DxI1gZFI.js";function S({children:l,variant:t="red-and-white",href:r,className:n="",...s}){const o=`
    font-cormorant leading-none tracking-[.05em] transition-colors duration-300
    px-8 py-3 text-center inline-block
   ${{"red-and-white":`
      bg-transparent text-pure-white border-2 border-deep-red
      hover:bg-deep-red hover:bg-opacity-75 hover:text-white
    `,"outline-light":`
      bg-transparent text-pure-white border-2 border-pure-white
      hover:bg-pure-white hover:text-deep-red
    `,"outline-dark":`
      bg-transparent text-deep-red border-2 border-deep-red
      hover:bg-deep-red hover:text-pure-white
    `}[t]} ${n}`;return r?e.jsx("a",{href:r,className:o,children:l}):e.jsx("button",{className:o,...s,children:l})}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],_=P("SquarePen",T);function K({admin:l,successCallback:t}){const[r,n]=u.useState(!1),[s,i]=u.useState(l);function d(){y("/admin",{data:{id:l.id},displayError:!0,displaySuccess:!0,onSuccess:()=>{n(!1),t()}})}function o(){b("/admin",{data:{id:l.id,name:s.name,email:s.email},displayError:!0,displaySuccess:!0,onSuccess:()=>{t()}})}return e.jsxs(A,{open:r,onOpenChange:n,children:[e.jsx(w,{asChild:!0,children:e.jsx(_,{className:"h-5 w-5"})}),e.jsxs(E,{children:[e.jsx(R,{children:e.jsx(k,{children:l.name})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(j,{children:"Name"}),e.jsx(f,{placeholder:"Name",value:s.name,onChange:a=>i({...s,name:a.target.value})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(j,{children:"Email"}),e.jsx(f,{placeholder:"Email",value:s.email,onChange:a=>i({...s,email:a.target.value})})]})]}),e.jsxs(I,{children:[e.jsx(S,{variant:"primary",onClick:o,children:"Edit"}),e.jsx(S,{variant:"outline",onClick:d,children:"Delete"})]})]})]})}function G({children:l,isRefreshing:t}){const[r,n]=u.useState([]);function s(){D("/admin").then(a=>{n(a)})}u.useEffect(()=>{s()},[t]);function i(a){return(a==null?void 0:a.map(m=>m.name.split("_").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ")).filter(m=>m!==h.SUPER_ADMIN&&m!==h.ADMIN))[0]}const d=[{id:"select",header:({table:a})=>e.jsx(g,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onChange:c=>a.toggleAllPageRowsSelected(!!c),"aria-label":"Select all"}),cell:({row:a})=>e.jsx(g,{checked:a.getIsSelected(),onCheckedChange:c=>a.toggleSelected(!!c),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:"Name",cell:({row:a})=>e.jsx("div",{className:"w-[150px] truncate",children:a.getValue("name")})},{accessorKey:"email",header:"Email",cell:({row:a})=>e.jsx("div",{className:"w-[200px] truncate",children:a.getValue("email")})},{accessorKey:"roles",header:"Role",cell:({row:a})=>e.jsx("div",{className:"max-w-[150px] truncate",children:e.jsxs(v,{defaultValue:i(a.original.roles),onValueChange:c=>{b("/admin",{data:{id:a.original.id,role:c},displayError:!0,displaySuccess:!0,onSuccess:s})},children:[e.jsx(C,{className:"w-full",children:i(a.original.roles)}),e.jsxs(N,{className:"w-full",children:[e.jsx(x,{value:h.ADMIN,children:"Admin"}),e.jsx(x,{value:h.SUPER_ADMIN,children:"Super Admin"})]})]})})},{accessorKey:"actions",header:"Actions",cell:({row:a})=>e.jsx(K,{admin:a.original,successCallback:s})}],o=[{column:"name",placeholder:"Search by name"},{column:"email",placeholder:"Search by email"}];return e.jsx(M,{children:l,columns:d,data:r,searchComponent:o})}export{G as A,S as B};
