import{r,j as e,K as y,L as N}from"./app-jcZxfadF.js";import{B as _,a as k,b as x,c as m,d as p}from"./breadcrumb-BNyqjtds.js";import{P as S}from"./page-layout-BoCx3X3H.js";import{B as u,C as w}from"./config-CJWv1NHZ.js";import{I as C}from"./input-BxbAUxc7.js";import{c as f}from"./app-logo-icon-7LKdbMaF.js";import"./button-7upUcCYI.js";import"./chevron-right-CL00EHY5.js";import"./use-mobile-CM91JuZ6.js";import"./index-Ckg947LZ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M5 12h14",key:"1ays0h"}]],P=f("Minus",O);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],B=f("Plus",$);function V(){const{quantity:t,setQuantity:s}=r.useContext(h);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"outline",className:"w-max",onClick:()=>{t>1&&s(t-1)},children:e.jsx(P,{})}),e.jsx(C,{className:"w-20",type:"number",value:t,onChange:a=>s(Number(a.target.value))}),e.jsx(u,{variant:"outline",className:"w-max",onClick:()=>{s(t+1)},children:e.jsx(B,{})})]})}function I(t){const s={};return t.forEach(a=>{a.variation_stocks.forEach(o=>{const n=o.variation_option.variation.name;s[n]||(s[n]=[]),(s[n].length===0||s[n].some(i=>i.stock_id!==a.id))&&s[n].push({stock_id:a.id,variation_option_name:o.variation_option.name,variation_stock_id:o.id})})}),s}const d=({stocks:t})=>{const s=I(t);return e.jsx("div",{children:Object.keys(s).map(a=>e.jsxs("div",{className:"my-3",children:[e.jsx("p",{className:"text-sm font-bold",children:a}),e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsx(d.Variation,{filteredStocks:s,stock:a})})]},a))})};d.Variation=({filteredStocks:t,stock:s})=>{const[a,o]=r.useState(null),{selectedVariationOptions:n,setSelectedVariationOptions:i}=r.useContext(h);return r.useEffect(()=>{a&&i({...n,[s]:[a]})},[a]),e.jsx("div",{className:"flex gap-1",children:t[s].map(c=>e.jsx(d.VariationOption,{item:c,selectedVariationOption:a,setSelectedVariationOption:o},c.stock_id))})};d.VariationOption=({item:t,selectedVariationOption:s,setSelectedVariationOption:a})=>e.jsx("div",{"data-stock-id":t.stock_id,className:`text-foreground w-max rounded-full px-3 py-1 text-sm ${(s==null?void 0:s.variation_option_name)===t.variation_option_name?"bg-accent":"border bg-transparent"}`,onClick:()=>a(t),children:t.variation_option_name});const h=r.createContext({quantity:1,setQuantity:()=>{},stock:null,setStock:()=>{},selectedVariationOptions:{},setSelectedVariationOptions:()=>{}});function M({product:t}){const[s,a]=r.useState(1),[o,n]=r.useState(null),[i,c]=r.useState({});return e.jsxs(h.Provider,{value:{quantity:s,setQuantity:a,stock:o,setStock:n,selectedVariationOptions:i,setSelectedVariationOptions:c},children:[e.jsx(d,{stocks:t.stocks??[]}),e.jsx(V,{}),e.jsx(u,{onClick:()=>{const l=Object.values(i).map(v=>v.map(b=>b.variation_option_name).join(", ")).join(" And "),g=`I want to buy ${s===1?"1 item":`${s} items`} of ${t.name} in ${l}`;window.open(`https://wa.me/${w.seller.whatsapp}?text=${g}`,"_blank")},disabled:Object.keys(i).length===0,variant:"primary",children:"Add to Cart"})]})}function L(){var o,n,i,c;const{product:t}=y().props,[s,a]=r.useState(((o=t.images)==null?void 0:o[0])??{id:0,path:"https://placehold.co/800?text=No+Images+found&font=robotoa",product_id:0});return e.jsxs(S,{children:[e.jsx(N,{title:"Product"}),e.jsxs("div",{className:"container mx-auto flex flex-col gap-5 p-4",children:[e.jsx(q,{product:t}),e.jsxs("div",{className:"flex h-screen flex-col gap-5 lg:flex-row",children:[e.jsxs("div",{className:"lg:hidden",children:[e.jsx("h2",{className:"text-2xl font-bold lg:text-4xl",children:t.name}),e.jsx("span",{className:"text-sm text-gray-500",children:(n=t.category)==null?void 0:n.name})]}),e.jsx("div",{className:"relative h-[80vh] flex-1 overflow-hidden rounded-lg",children:e.jsx("img",{src:s.path,className:"animate-in fade-in-0 absolute h-full w-full bg-cover bg-center object-cover duration-1000 hover:scale-120"})}),e.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h2",{className:"text-2xl font-bold lg:text-4xl",children:t.name}),e.jsx("span",{className:"text-sm text-gray-500",children:(i=t.category)==null?void 0:i.name})]}),e.jsx("hr",{}),e.jsx("div",{className:"flex w-full gap-3 overflow-x-auto",children:(c=t.images)==null?void 0:c.map((l,j)=>{if(l.id!==s.id)return e.jsx("img",{src:l.path,className:"h-15 w-15 rounded-md bg-cover bg-center object-cover",onClick:()=>a(l)},l.id)})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),e.jsx(M,{product:t})]})]})]})]})}function q({product:t}){var s,a;return e.jsx(_,{children:e.jsxs(k,{children:[e.jsx(x,{children:e.jsx(m,{href:"/shop",children:"Shop"})}),e.jsx(p,{}),e.jsx(x,{children:e.jsx(m,{className:"truncate",href:`/shop/${(s=t.category)==null?void 0:s.slug}`,children:(a=t.category)==null?void 0:a.name})}),e.jsx(p,{}),e.jsx(x,{children:e.jsx(m,{className:"truncate",href:`/product/${t.slug}`,children:t.name})})]})})}function J(){return e.jsx(L,{})}export{J as default};
