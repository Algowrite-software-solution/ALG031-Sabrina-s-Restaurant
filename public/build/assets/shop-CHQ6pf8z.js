import{r as s,j as e,K as I,L as M}from"./app-7aIYh_Ic.js";import{P as _}from"./page-layout-eMaFRaJt.js";import{B as O}from"./config-B9Ts1Lxx.js";import{b as $}from"./api-cWkGZ5zh.js";import{c as E,B as j}from"./button-DivPSDMD.js";import{X as B,u as K}from"./use-mobile-DrCCC82x.js";import{S as q}from"./simple-card-DtnSCtix.js";import{L as R}from"./loader-circle-DWbD7inN.js";import{c as S}from"./app-logo-icon-BlxftrwG.js";import{C as A}from"./chevron-right-44VWv7lF.js";import{u as H,a as T,I as V,U as G,$ as J,b as U}from"./label-C066nblo.js";import{K as X,_ as Q,L as W}from"./use-sync-refs-D9i852h_.js";import"./input-Bl50pcIh.js";import"./index-Dl3K45b7.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Z=S("ChevronLeft",Y);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],ee=S("ChevronsLeft",D);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],te=S("ChevronsRight",se);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],re=S("List",ae);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],oe=S("Search",ie);let le="input";function ne(d,f){let c=s.useId(),m=H(),a=T(),{id:r=m||`headlessui-input-${c}`,disabled:i=a||!1,autoFocus:t=!1,invalid:p=!1,...o}=d,u=V(),l=G(),{isFocused:b,focusProps:w}=J({autoFocus:t}),{isHovered:v,hoverProps:N}=U({isDisabled:i}),h=Q({ref:f,id:r,"aria-labelledby":u,"aria-describedby":l,"aria-invalid":p?"":void 0,disabled:i||void 0,autoFocus:t},w,N),k=s.useMemo(()=>({disabled:i,invalid:p,hover:v,focus:b,autofocus:t}),[i,p,v,b,t]);return W()({ourProps:h,theirProps:o,slot:k,defaultTag:le,name:"Input"})}let ce=X(ne);function P({isOpen:d,setIsOpen:f}){return e.jsxs("div",{className:E("bg-muted absolute top-0 left-0 z-50 m-2 hidden h-[97.5vh] w-[95%] rounded-xl p-3 shadow-2xl lg:relative lg:max-h-full lg:w-96",d&&"flex flex-col"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Filter"}),e.jsx(B,{className:"cursor-pointer",onClick:()=>f(!1)})]}),e.jsx("div",{className:"flex max-h-screen flex-col gap-2 overflow-y-auto pe-2",children:e.jsx(P.Section,{uri:"/category",title:"Categories",filterOptionKey:"categories"})})]})}P.Section=function({uri:f,title:c,filterOptionKey:m}){const{updateFilter:a}=s.useContext(F),[r,i]=s.useState(),[t,p]=s.useState();return s.useEffect(()=>{$(f).then(o=>{i(o)})},[f]),s.useEffect(()=>{a(m,t)},[t]),e.jsxs("div",{className:"border-muted-foreground/30 flex flex-col gap-2 rounded-lg border p-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:c}),e.jsx("div",{className:"flex h-42 flex-wrap gap-2 overflow-y-auto",children:Array.isArray(r)&&r.map(o=>e.jsx(O,{variant:t!=null&&t.includes(o)?"selected-primary":"outline",size:"sm",className:"w-max",onClick:()=>{t!=null&&t.includes(o)?p(t==null?void 0:t.filter(u=>u.id!==o.id)):p([...t||[],o])},children:o.name},o.id))})]})};function ue(){const[d,f]=s.useState([]),[c,m]=s.useState([]),[a,r]=s.useState(1),[i]=s.useState(9),{props:t}=I(),[p,o]=s.useState(!1),u=s.useContext(L),l=K(),[b,w]=s.useState(!1),[v,N]=s.useState("");s.useEffect(()=>{var n;o(!0),$("/product",{data:{category_ids:t.category?[t.category.id]:(n=u==null?void 0:u.filterOptions.categories)==null?void 0:n.map(C=>C.id),search:u==null?void 0:u.search}}).then(C=>{f(C),o(!1)})},[u]),s.useEffect(()=>{m(d.slice((a-1)*i,a*i))},[a,d,i]);const h=Math.ceil(d.length/i),k=()=>{const n=parseInt(v);n>0&&n<=h&&(r(n),w(!1),N(""))},z=()=>{const n=[];if(h<=3)for(let x=1;x<=h;x++)n.push(x);else{n.push(1),a>3&&n.push("...");const x=Math.max(2,a-1),y=Math.min(h-1,a+1);for(let g=x;g<=y;g++)n.push(g);a<h-2&&n.push("..."),n.push(h)}return e.jsxs("div",{className:"grid grid-cols-4 grid-rows-2 items-center gap-1 lg:flex lg:flex-row",children:[e.jsxs("div",{className:"col-span-2 row-span-2 flex items-center gap-1",children:[e.jsx(j,{variant:"outline",size:l?"sm":"default",onClick:()=>r(1),disabled:a===1,children:l?e.jsx(ee,{}):"First"}),e.jsx(j,{variant:"outline",size:l?"sm":"default",onClick:()=>r(a-1),disabled:a===1,children:l?e.jsx(Z,{}):"Previous"})]}),e.jsx("div",{className:"col-span-4 row-start-1 row-end-2 flex items-center justify-center gap-1",children:n.map((x,y)=>x==="..."?b?e.jsx("input",{type:"number",value:v,onChange:g=>N(g.target.value),onBlur:k,onKeyPress:g=>g.key==="Enter"&&k(),className:`rounded border px-2 py-1 ${l?"w-8":"w-10"}`,autoFocus:!0},y):e.jsx(j,{size:l?"sm":"default",variant:"outline",onClick:()=>w(!0),children:"..."},y):e.jsx(j,{size:l?"sm":"default",variant:a===x?"default":"outline",onClick:()=>r(x),children:x},y))}),e.jsxs("div",{className:"col-span-2 row-span-2 flex items-center gap-1",children:[e.jsx(j,{size:l?"sm":"default",variant:"outline",onClick:()=>r(a+1),disabled:a===h,children:l?e.jsx(A,{}):"Next"}),e.jsx(j,{size:l?"sm":"default",variant:"outline",onClick:()=>r(h),disabled:a===h,children:l?e.jsx(te,{}):"Last"})]})]})};return e.jsxs("div",{className:"relative mb-4 flex w-full flex-wrap justify-center gap-6 overflow-y-auto p-3 py-5",children:[c.map(n=>e.jsx(q,{data:n},n.id)),p&&e.jsxs("div",{className:"absolute mt-40 flex w-full flex-col items-center justify-center gap-2",children:[e.jsx(R,{className:"h-16 w-16 animate-spin"}),e.jsx("p",{children:"Loading.."})]}),c.length===0&&!p&&e.jsx("div",{className:"flex w-full justify-center gap-1",children:"No products found"}),c.length>0&&e.jsx("div",{className:"flex w-full justify-center gap-1",children:z()})]})}function de({isOpen:d,setIsOpen:f}){const[c,m]=s.useState(""),[a,r]=s.useState(!1),i=s.useContext(L);function t(){c.length>3||c.length===0?r(!0):r(!1)}return s.useEffect(()=>{t()},[c]),s.useEffect(()=>{a&&(i==null||i.updateSearch("search",c),r(!1))},[a]),e.jsxs("div",{className:"flex h-16 flex-col items-center justify-center gap-2 p-3",children:[e.jsxs("div",{className:"flex w-full flex-row-reverse items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2 md:w-1/2 lg:w-1/4",children:[e.jsx(ce,{className:"w-full rounded-full border-1 px-3 py-1.5",placeholder:"Search",value:c,onChange:p=>m(p.target.value),onBlur:()=>t()}),e.jsx(oe,{className:"cursor-pointer"})]}),!d&&e.jsx(re,{className:"text-muted-foreground cursor-pointer",onClick:()=>f(!0)})]}),e.jsx("hr",{className:"bg-muted h-1 w-full"})]})}const F=s.createContext({filterOptions:{},updateFilter:()=>{}}),L=s.createContext({filterOptions:{},search:"",updateSearch:()=>{}});function fe({children:d}){const[f,c]=s.useState(!1),[m,a]=s.useState({}),[r,i]=s.useState({filterOptions:{},search:"",updateSearch:()=>{}}),t=(o,u)=>{a(l=>({...l,[o]:u}))},p=(o,u)=>{i(l=>({...l,[o]:u}))};return e.jsx(L.Provider,{value:{filterOptions:m,search:r.search,updateSearch:p},children:e.jsxs(F.Provider,{value:{filterOptions:m,updateFilter:t},children:[e.jsx(M,{title:"Shop"}),e.jsxs("main",{className:"bg-background relative flex",style:{boxSizing:"border-box"},children:[e.jsx(P,{isOpen:f,setIsOpen:c}),e.jsxs("div",{className:"z-10 flex h-screen w-full flex-col pe-2",children:[e.jsx(de,{isOpen:f,setIsOpen:c}),e.jsx(ue,{})]})]}),d]})})}function pe({children:d}){return e.jsx(_,{children:e.jsx(fe,{children:d})})}function he(){return e.jsx(pe,{})}function $e(){return e.jsx(he,{})}export{$e as default};
