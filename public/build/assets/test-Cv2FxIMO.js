import{j as t,r as d}from"./app-DqJGtIoe.js";import{a as m,c as y,d as w,b as N}from"./api-yw0dWnCP.js";import{c as P}from"./react-YkHU62tl.js";import"./index-BZKMzeKp.js";import"./index-CuliIMVo.js";import"./config-DdtzMSVa.js";const C=e=>{const r=new FormData;return Object.entries(e).forEach(([s,a])=>{a!=null&&(Array.isArray(a)?a.forEach(o=>{r.append(`${s}[]`,o)}):r.append(s,a))}),r},F=e=>m("/products",{params:e}),S=e=>m(`/products/${e}`),$=e=>{const r=C(e);return N("/products",{data:r,isMultipart:!0,displaySuccess:!0})},D=(e,r)=>w(`/products/${e}`,{data:r,displaySuccess:!0}),A=e=>y(`/products/${e}`,{displaySuccess:!0}),g={getProducts:F,getProduct:S,createProduct:$,updateProduct:D,deleteProduct:A},l=P()((e,r)=>({products:null,filters:{categories:[]},loading:!1,setFilters:s=>e(a=>({filters:{...a.filters,...s}})),fetchData:async()=>{e({loading:!0});try{const s=await g.getProducts(r().filters);console.log("Fetched products:",s),e({products:s})}finally{e({loading:!1})}}})),E=({data:e})=>{var h,p;const{name:r="Untitled Product",brand:s,images:a,price:o=0,final_price:n=0,discount_value:z=0,categories:c}=e||{},i=n>0&&n<o,f=i?n:o,u=i?o:null,j=c&&c.length>0?c[0].name:"Uncategorized",v=(s==null?void 0:s.name)||"Generic Brand",x=(a==null?void 0:a[0].url)||"https://via.placeholder.com/800x800/f0f0f0/333333?text=No+Image",b=((p=(h=e==null?void 0:e.images)==null?void 0:h[0])==null?void 0:p.alt_text)||`Image of ${r}`;return t.jsxs("div",{className:"group relative flex w-full max-w-xs flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md transition-transform duration-300 ease-in-out hover:-translate-y-1 hover:shadow-xl",children:[t.jsxs("div",{className:"relative mx-3 mt-3 flex h-60 overflow-hidden rounded-xl",children:[t.jsx("img",{className:"peer absolute top-0 right-0 h-full w-full object-cover",src:x,alt:b}),t.jsx("img",{className:"peer absolute top-0 -right-96 h-full w-full object-cover transition-all delay-100 duration-1000 peer-hover:right-0 hover:right-0",src:x.replace("A9A9A9","a2c4b2"),alt:`Hover view of ${r}`}),i&&t.jsx("span",{className:"absolute top-0 left-0 m-2 rounded-full bg-black px-2 text-center text-sm font-medium text-white",children:`${Math.round((o-n)/o*100)}% OFF`})]}),t.jsxs("div",{className:"mt-4 px-5 pb-5",children:[t.jsxs("div",{className:"mb-2",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500",children:v.toUpperCase()}),t.jsx("h5",{className:"truncate text-xl tracking-tight text-slate-900",children:r})]}),t.jsx("p",{className:"mb-4 truncate text-sm text-gray-600",children:j}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{children:[t.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:["$",f.toFixed(2)]}),u&&t.jsxs("span",{className:"ml-2 text-sm text-slate-900 line-through",children:["$",u.toFixed(2)]})]}),t.jsxs("button",{className:"flex items-center rounded-md bg-slate-900 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gray-700 focus:ring-4 focus:ring-blue-300 focus:outline-none",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-2 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Add to cart"]})]})]})]})},M=()=>{const{products:e,loading:r}=l();return r?t.jsx("p",{children:"Loading..."}):t.jsx("div",{className:"bg bg-secondary mt-4 flex flex-wrap justify-around gap-2 rounded-2xl p-6",children:e==null?void 0:e.data.map(s=>t.jsx(E,{data:s},s.id))})},k=()=>{const{setFilters:e}=l(),r=s=>e({categories:s.target.value>0?[s.target.value]:[]});return t.jsx("div",{children:t.jsxs("select",{onChange:r,children:[t.jsx("option",{value:0,children:"All"}),t.jsx("option",{value:1,children:"Shoes"}),t.jsx("option",{value:2,children:"Clothing"})]})})},L=()=>{const{setFilters:e}=l();return t.jsx("input",{type:"text",placeholder:"Search...",onChange:r=>{(r.target.value.length>=3||r.target.value.length===0)&&e({name:r.target.value})}})},U=()=>{const{fetchData:e,filters:r}=l();return d.useEffect(()=>{e()},[r]),t.jsxs("div",{children:[t.jsx(L,{}),t.jsx(k,{}),t.jsx(M,{})]})};function I(){const[e,r]=d.useState();return d.useEffect(()=>{g.getProducts({page:1,limit:10}).then(s=>{r(s.data),console.log("Products:",s.data)}).catch(s=>{console.error("Error fetching products:",s)})},[]),t.jsxs("div",{className:"container mx-auto bg-teal-800 px-10 py-3 text-center text-2xl font-bold",children:[t.jsx("h1",{children:"Testing One"}),t.jsx(U,{})]})}export{I as default};
